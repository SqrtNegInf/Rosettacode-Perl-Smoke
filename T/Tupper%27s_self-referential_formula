#!/usr/local/bin/perl
#u# https://www.rosettacode.org/wiki/Tupper%27s_self-referential_formula
#c# 2024-09-09 <RC
#p# OK

my @res;

use strict;
use warnings;
use feature 'say';

use Math::BigInt;

my ($H, $W) = (17, 106);

# this is the formula, if you are so inclined ..
# my $N = Math::BigInt->new("4858450636189713423582095962494202044581400587983244549483093085061934704708809928450644769865524364849997247024915119110411605739177407856919754326571855442057210445735883681829823754139634338225199452191651284348332905131193199953502413758765239264874613394906870130562295813219481113685339535565290850023875092856892694555974281546386510730049106723058933586052544096664351265349363643957125565695936815184334857605266940161251266951421550539554519153785457525756590740540157929001765967965480064427829131488548259914721248506352686630476300");

my $N = Math::BigInt->new("255841233929480061254292030977798831279388404045063481793831478514076227121382363762438893921613293154227741416461974206584829382888852193077954638358582072398456062820286937288998704766348971464475554086895");

for ( my $y = $N+$H-1; $y >= $N; $y-- ) {
   push @res, join('', map {
      $y/$H/Math::BigInt->new(2)->bpow($H * $_ + $y % $H) % 2 ? "#" : ' '
   } (0..$W-1) );  #, "\n";
}

say my $result = join "\n", @res;

my $ref = <<'EOD';
########   ######### ########   ###                                                                       
#########  ######### #########  ###                                                                       
###    ### ###       ###    ### ###                                                                       
###     ## ###       ###     ## ###                                                                       
###     ## ###       ###     ## ###                                                                       
###     ## ###       ###     ## ###                                                                       
###    ### ###       ###    ### ###                                                                       
#########  ########  #########  ###                                                                       
#######    ########  ########   ###                                                                       
###        ###       ### ###    ###                                                                       
###        ###       ### ###    ###                                                                       
###        ###       ###  ###   ###                                                                       
###        ###       ###  ###   ###                                                                       
###        ###       ###   ###  ###                                                                       
###        ###       ###   ###  ###                                                                       
###        ######### ###    ### #########                                                                 
###        ######### ###    ### #########                                                                 
EOD

use Test::More;
chomp $ref;
is ($result, $ref);
done_testing();
