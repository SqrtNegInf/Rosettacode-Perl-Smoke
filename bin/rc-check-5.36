#!/usr/bin/env perl
## see how v5.36 checks out with current RC code
#  2023-03-30 replace Z with A, B, ...
#  list of programs that fail (excluding those with just library lookup issues): 
#     grep -v OK tmp/err[0-Z] | pg -v '( locate |aborted)' | perl -npe 's/\s(\S+)\s/\n$1\n/g' | fgrep './' | sort -u 

chdir "$ENV{HOME}/perl5/Rosetta-Code/tmp";

for my $d ('0', 'A'..'Z') {
   #print "$d\n";
    my $f = $d eq '0' ? '[0-9]' : $d;
    system "cp -pr ../$d .; rm $d/*\.[0123] 2> /dev/null; perl -i -npe 's/#p#/use v5.36;\\n#p#/' $d/$f\*";
    system "cd $d; ln -s ../../ref .; find . -name '$f*'     -exec perl -c {} \\; > ../out 2> ../err$d";
    system "rm -rf $d";
}
