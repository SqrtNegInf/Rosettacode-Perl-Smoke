#!/usr/local/bin/perl
#u# https://rosettacode.org/wiki/Iccanobif_primes
#c# 2023-04-29 >RC
#p# OK

my @res;

use v5.36;
use strict; 
use warnings;
use ntheory qw<is_prime lucasu>;

sub abbr ($d,$w) { my $l = length $d; $l < $w+1 ? $d : substr($d,0,$w/2) . '..' . substr($d,-$w/2) . " ($l digits)" }

my($n,$cnt) = (0,0);
do {
    my $f = lucasu(1, -1, $n++);
    my $p = join '', reverse split '', $f;
    push @res, sprintf "%-2d: %s", ++$cnt, abbr($p,50) if is_prime $p;
} until $cnt == 24;

say my $result = join "\n", @res;

my $ref = <<'END';
1 : 2
2 : 3
3 : 5
4 : 31
5 : 43
6 : 773
7 : 7951
8 : 64901
9 : 52057
10: 393121
11: 56577108676171
12: 940647607443258103531
13: 5237879497657222310489731409575442761
14: 9026258083384996860449366072142307801963
15: 1990033567481230296931572..7761734431012073266446403 (80 digits)
16: 7784113736296747998535374..4225852312097783685331923 (104 digits)
17: 3772258590156760418889054..0418929174997072830756131 (137 digits)
18: 7573619389487613159560930..3825250767238644714305761 (330 digits)
19: 1789033684733283762083823..6460613175300695235035913 (406 digits)
20: 9232716310172911530591881..2926827061468856047302507 (409 digits)
21: 5042015781069805625307632..4678167335124247362214481 (503 digits)
22: 3051101247473938009235655..5099969296158361330018201 (888 digits)
23: 4681854704269369455500276..7342708664543144645856321 (1020 digits)
24: 8710134785303781988432088..0748420128396998865227391 (1122 digits)
END
#25: 1745165602254376533619643..0185220100243761843652461 (1911 digits)

use Test::More;
chomp $ref;
is($result, $ref);
done_testing();
