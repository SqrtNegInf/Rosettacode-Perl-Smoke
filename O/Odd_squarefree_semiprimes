#!/usr/local/bin/perl
#u# http://rosettacode.org/wiki/Odd_squarefree_semiprimes
#c# 2021-04-19 <RC
#p# OK
#n# interesting technique: "@primes" =~ 
#n# (also used in 'Nonogram_solver', for other than just table formatting)

my @res;

use strict;
use warnings;
use feature 'say';

my (@primes, @found) = grep $_ & 1 && (1 x $_) !~ /^(11+)\1+$/, 3 .. 999 / 3;
"@primes" =~ /\b(\d+)\b.*?\b(\d+)\b(?{ $found[$1 * $2] = $1 * $2 })(*FAIL)/;
say my $result = "@{[ grep $_, @found[3 .. 999] ]}\n" =~ s/.{75}\K /\n/gr;

my $ref = <<'EOD';
15 21 33 35 39 51 55 57 65 69 77 85 87 91 93 95 111 115 119 123 129 133 141
143 145 155 159 161 177 183 185 187 201 203 205 209 213 215 217 219 221 235
237 247 249 253 259 265 267 287 291 295 299 301 303 305 309 319 321 323 327
329 335 339 341 355 365 371 377 381 391 393 395 403 407 411 413 415 417 427
437 445 447 451 453 469 471 473 481 485 489 493 497 501 505 511 515 517 519
527 533 535 537 543 545 551 553 559 565 573 579 581 583 589 591 597 611 623
629 633 635 649 655 667 669 671 679 681 685 687 689 695 697 699 703 707 713
717 721 723 731 737 745 749 753 755 763 767 771 779 781 785 789 791 793 799
803 807 813 815 817 831 835 843 849 851 865 869 871 879 889 893 895 899 901
905 913 917 921 923 933 939 943 949 951 955 959 965 973 979 985 989 993 995
EOD

use Test::More;
is ($result, $ref);
done_testing;
