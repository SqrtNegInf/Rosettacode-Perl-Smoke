#!/usr/local/bin/perl
#u# http://rosettacode.org/wiki/Calculating_the_value_of_e
#c# 2018-08-22 >RC
#p# OK

use feature 'say';
 
# good to 14 digits
$e  = 2;
$fact = 1;
do { 
    $e0 = $e;
    $n++;
    $fact *= 2*$n * (1 + 2*$n);
    $e += (2*$n+2)/$fact;
} until ($e-$e0) < 1.0e-15;

# module, high precision
use bigrat qw(bexp e);
say e; # just 38 sig. dig.
$result2 = bexp(1,1131);
 
say "Computed e = " . $e;
say "Real e     = " . e;
say "Error      = " . (e-$e);
say "Iterations = " . $n;
 
my $ref =<<'END';
2.71828182845904523536028747135266249775724709369995957496696762772407663035354759457138217852516642742746639193200305992181741359662904357290033429526059563073813232862794349076323382988075319525101901157383418793070215408914993488416750924476146066808226480016847741185374234544243710753907774499206955170276183860626133138458300075204493382656029760673711320070932870912744374704723069697720931014169283681902551510865746377211125238978442505695369677078544996996794686445490598793163688923009879312773617821542499922957635148220826989519366803318252886939849646510582093923982948879332036250944311730123819706841614039701983767932068328237646480429531180232878250981945581530175671736133206981125099618188159304169035159888851934580727386673858942287922849989208680582574927961048419844436346324496848756023362482704197862320900216099023530436994184914631409343173814364054625315209618369088870701676839642437814059271456354906130310720851038375051011574770417189861068739696552126715468895703503540212340784981933432106817012100562788023519303322474501585390473041995777709350366041699732972508868769664035557071622684471625608
END

use Test::More;
is($e, '2.71828182845904');
chop $ref;
is($result2, $ref);
done_testing();
