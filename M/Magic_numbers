#!/usr/local/bin/perl
#u# https://rosettacode.org/wiki/Magic_numbers
#t# inprogress
#c# 2023-05-xx >RC
#p# OK

my @res;

use v5.36;

use bigint;
use List::Util 'uniq';

#sub X ($a,$b) { my @c; for my $aa (0..$a-1) { for my $bb (0..$b-1) { push @c, $aa, $bb } } @c }

my %M; 
#my @d = 
my @magic = 0..9;

my $dcnt = 1;
shift @magic;
while (1) {
    my @try = ();
    for my $d (0..9) { map { push @try, 10*$_ + $d} @magic }; # 0..9;
#    say 'a'; say join ' ', @a; 
#    say 'b'; say join ' ', @b; sleep 2;
    my @foo = grep { 0 == $_ % $dcnt } @try;
    push @magic, uniq sort @magic, @foo;
    $dcnt++;
    last if $dcnt == 3;
}
 
say '0 ', join ' ', sort @magic; exit

#0 1 2 3 4 5 6 7 8 9 10 12 14 16 18 20 22 24 26 28 30 32 34 36 38 40 42 44 46 48 50 52 54 56 58 60 62 64 66 68 70 72 74 76 78 80 82 84 86 88 90 92 94 96 98 102 105 108 120 123 126 129 141 144 147 162 165 168 180 183 186 189 201 204 207 222 225 228 240 243 246 249 261 264 267 282 285 288 300 303 306 309 321 324 327 342 345 348 360 363 366 369 381 384 387 402 405 408 420 423 426 429 441 444 447 462 465 468 480 483 486 489 501 504 507 522 525 528 540 543 546 549 561 564 567 582 585 588 600 603 606 609 621 624 627 642 645 648 660 663 666 669 681 684 687 702 705 708 720 723 726 729 741 744 747 762 765 768 780 783 786 789 801 804 807 822 825 828 840 843 846 849 861 864 867 882 885 888 900 903 906 909 921 924 927 942 945 948 960 963 966 969 981 984 987

#push @magic, <113456789 123456789 234567891 987654321 1234567890 1203456789 3608528850368400786036725>;

$M{length $_}++ for @magic;

push @res, sprintf "There are %d magic numbers in total.\n", scalar @magic;
#push @res, sprintf "There are:";
for my $k (sort keys %M) {
    push @res, sprintf " %6d with %3d digit%s",  $M{$k}, $k, $k>1?'s':'';
}

push @res, "\nThe largest is $magic[-1].\n";

for my $i (1,0) {
    my $digits = join '', $i..9;
    push @res, "All magic numbers that are pan-digital in $i through 9 with no repeats: " . 
        grep { length $_ == 10-$i and $digits eq join '', sort split '', $_ } @magic;
}

say my $result = join "\n", @res;
exit;

my $ref = <<'END';
There are 20457 magic numbers in total.

The largest is 3608528850368400786036725.

There are:
  10 with  1 digit
  45 with  2 digits
 150 with  3 digits
 375 with  4 digits
 750 with  5 digits
1200 with  6 digits
1713 with  7 digits
2227 with  8 digits
2492 with  9 digits
2492 with 10 digits
2225 with 11 digits
2041 with 12 digits
1575 with 13 digits
1132 with 14 digits
 770 with 15 digits
 571 with 16 digits
 335 with 17 digits
 180 with 18 digits
  90 with 19 digits
  44 with 20 digits
  18 with 21 digits
  12 with 22 digits
   6 with 23 digits
   3 with 24 digits
   1 with 25 digits

All magic numbers that are pan-digital in 1 through 9 with no repeats: 381654729
All magic numbers that are pan-digital in 0 through 9 with no repeats: 3816547290
END


use Test::More;
chomp $ref;
is($result, $ref);
#is(($result =~ s/\s//gr), ($ref =~ s/\s//gr));
done_testing();

__END__

=={{header|Perl}}==
<syntaxhighlight lang="perl" line>
</syntaxhighlight>
{{out}}
<pre>
</pre>
