#!/usr/local/bin/perl
#u# http://rosettacode.org/wiki/Catalan_numbers
#c# 2018-07-21 <RC
#p# OK

use strict;
use warnings;
use feature 'say';
my $result;
my @c1000;

my @c = (1);
sub catalan { 
        use bigint;
        $c[$_[0]] //= catalan($_[0]-1) * (4 * $_[0]-2) / ($_[0]+1)
}

# most of the time is spent displaying the long numbers, actually
push @c1000, catalan($_) for 0 .. 1000; # down from 10000

say $c1000[-1];

my $last = '2046105521468021692642519982997827217179245642339057975844538099572176010191891863964968026156453752449015750569428595097318163634370154637380666882886375203359653243390929717431080443509007504772912973142253209352126946839844796747697638537600100637918819326569730982083021538057087711176285777909275869648636874856805956580057673173655666887003493944650164153396910927037406301799052584663611016897272893305532116292143271037140718751625839812072682464343153792956281748582435751481498598087586998603921577523657477775758899987954012641033870640665444651660246024318184109046864244732001962029120';

use Test::More;
is ($c1000[-1], $last);
done_testing();
