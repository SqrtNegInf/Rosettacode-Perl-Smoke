#!/usr/local/bin/perl
#u# http://rosettacode.org/wiki/Rosetta_Code/Find_unimplemented_tasks
#c# 2018-08-21 <RC, 2019-05-02 >RC
#p# OK

use feature 'say';
use LWP::UserAgent;

my $ua = LWP::UserAgent->new;
$ua->agent('');

sub enc { join '', map {sprintf '%%%02x', ord} split //, shift }
sub get { $ua->request( HTTP::Request->new( GET => shift))->content }

sub tasks {
    my($category) = shift;
    my $fmt = 'http://www.rosettacode.org/mw/api.php?' .
              'action=query&generator=categorymembers&gcmtitle=Category:%s&gcmlimit=500&format=json&rawcontinue=';
    my @tasks;
    my $json = get(sprintf $fmt, $category);
    while (1) {
        push @tasks, $json =~ /"title":"(.+?)"\}/g;
        $json =~ /"gcmcontinue":"(.+?)"\}/ or last;
        $json = get(sprintf $fmt . '&gcmcontinue=%s', $category, enc $1);
    }
    @tasks;
}

my %language = map {$_, 1} tasks shift || 'perl';
$language{$_} or $result .= "$_\n" foreach tasks('Programming_Tasks'), tasks('Draft_Programming_Tasks');

#say $result; 

my $ref = <<'EOD';
15 puzzle solver
2048
Active Directory/Search for a user
Arena storage pool
AVL tree
Binary strings
Bitmap/B\u00e9zier curves/Cubic
Bitmap/B\u00e9zier curves/Quadratic
Bitmap/Histogram
Bitmap/Midpoint circle algorithm
Bitmap/PPM conversion through a pipe
Bitmap/Read an image through a pipe
Call a function in a shared library
Canny edge detector
Catmull\u2013Clark subdivision surface
Color of a screen pixel
Color quantization
Colour pinstripe/Printer
Compare sorting algorithms' performance
Constrained genericity
Create a file on magnetic tape
Create an object at a given address
Doubly-linked list/Definition
Doubly-linked list/Traversal
Factorial base numbers indexing permutations of a collection
Galton box animation
Go Fish
GUI component interaction
GUI enabling/disabling of controls
Hunt The Wumpus
Image convolution
Imaginary base numbers
Joystick position
K-d tree
K-means++ clustering
Keyboard macros
Machine code
Magic squares of doubly even order
Magic squares of singly even order
Main step of GOST 28147-89
Median filter
Multiple regression
Numerical and alphabetical suffixes
OLE Automation
OpenWebNet Password
Parametric polymorphism
Pinstripe/Printer
Play recorded sounds
Polyspiral
QR decomposition
Record sound
Reflection/Get source
Rendezvous
Retrieve and search chat history
Scope/Function names and labels
Simulate input/Mouse
Solve the no connection puzzle
Sutherland-Hodgman polygon clipping
Terminal control/Positional read
Thiele's interpolation formula
Use another language to call a function
Vigen\u00e8re cipher/Cryptanalysis
Vogel's approximation method
Word search
Zeckendorf arithmetic
15 Puzzle Game in 3D
16 Puzzle Game
A* search algorithm
Addition-chain exponentiation
ASCII art diagram converter
Assertions in design by contract
Audio frequency generator
Audio Overlap Loop
AudioAlarm
Banker's algorithm
Bilinear interpolation
Birthday problem
Black Box
Blackjack strategy
Boids
Chess player
Chess player/Move generation
Chess player/Program options and user interface
Chess player/Search and evaluation
Code segment unload
Continued fraction/Arithmetic/G(matrix NG, Contined Fraction N)
Continued fraction/Arithmetic/G(matrix NG, Contined Fraction N1, Contined Fraction N2)
Convex hull
Data Encryption Standard
Decimal floating point number to binary
Elliptic Curve Digital Signature Algorithm
External sort
Fibonacci heap
Find URI in text
Finite state machine
Free polyominoes enumeration
Functional coverage tree
Generalised floating point addition
Generalised floating point multiplication
Geometric algebra
Greed
Hexapawn
I'm a software engineer, get me out of here
Interactive Help
IPC via named pipe
IRC gateway
Just in time processing on a character stream
Kahan summation
Kosaraju
List rooted trees
Make a backup file
Monads/Maybe monad
Monads/Writer monad
Morpion solitaire
Multidimensional Newton-Raphson method
Musical scale
N-body problem
One-time pad
OpenGL Pixel Shader
OpenGL/Utah Teapot
Particle Swarm Optimization
Pentomino tiling
Perceptron
Process SMIL directives in XML data
Proof
Railway circuit
Recursive descent parser generator
Remote agent/Agent interface
Remote agent/Agent logic
Remote agent/Simulation
Robots
Rosetta Code/List authors of task descriptions
Rosetta Code/Run examples
Rosetta Code/Tasks sorted by average lines of code
Rosetta Code/Tasks without examples
Run as a daemon or service
Self-hosting compiler
Simulated annealing
Sine wave
Singly-linked list/Element removal
Solve a Rubik's Cube
Sorting algorithms/Tree sort on a linked list
Spoof game
Table creation
Tamagotchi emulator
Terminal control/Restricted width positional input/No wrapping
Terminal control/Restricted width positional input/With wrapping
Tetris
Text to HTML
Time-based One-time Password Algorithm
Transportation problem
Ukkonen\u2019s Suffix Tree Construction
Unicode polynomial equation
Unit testing
Using a Speech engine to highlight words
Using the Meetup.com API
VList
Waveform analysis/Doh ray me
Waveform analysis/Top and tail
Weather Routing
EOD

use Test::More;
ok $result =~ /Weather.Routing/; # nobody implements this one
done_testing();
